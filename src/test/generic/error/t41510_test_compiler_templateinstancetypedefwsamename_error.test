## -*- mode:ulam -*-
#=t41510_test_compiler_templateinstancetypedefwsamename_error
#!
./Foo.ulam:3:21: ERROR: Invalid inheritance from local filescope; Class Definition 'Foo' is not a typedef.
./Foo.ulam:9:12: ERROR: Missing Class Arguments for an instance stub of class template 'Moo'.
./Foo.ulam:9:9: ERROR: Trying to use typedef from another class template 'Moo', but instance cannot be found.
Unrecoverable Program Parse FAILURE: <Foo.ulam>
Unrecoverable Program Parse FAILURE: <Moo.ulam>
##
##  informed by t3875, except using locals typedef with instance with same name as template, should not assert
## CompilerState.cpp:2313: bool MFM::CompilerState::isClassATemplate(MFM::u16): Assertion `isDefined' failed.
##
#>Foo.ulam
  ulam 3;
local typedef Moo(1) Moo;
element Foo : local.Moo {
  Bool(7) sp;
  Int test() {
    Unsigned a = 73;
    Foo f;
    a = f.us;
    a = Moo.sizeof; // <-- clearly confused, which Moo?? the class
    sp = (a == 42u);
    return (Int) a; //=42
  }
}

#:Moo.ulam
  ulam 1;
quark Moo(Int a) {
  Unsigned(3) us = 4u;
}


#.
